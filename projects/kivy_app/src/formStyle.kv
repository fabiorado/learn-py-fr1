#:import Factory kivy.factory.Factory

<Button>
    font_size: 32
    # size_hint: (.3, .3)

<PopupMenu@Popup>
    auto_dismiss: True
    size_hint: 0.4, 0.5
    pos_hint: {"x":0.5, "top": 0.9}
    title: "Menu popup"
    
    # Anchor Layout ???
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 10

        Button:
            text: "Option 1"
            font_size: 20
        Button:
            text: "Option 2"
            font_size: 20
        Button:
            text: "Option 3"
            font_size: 20

<MyLayout>
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        padding: 10
        spacing: 10

        FloatLayout:
            size: root.width, root.height
            Button:
                id: btnMenu
                text: "Menu"
                size_hint: (.2, .5)
                pos_hint: {"x":.8, "top":1}
                on_release: Factory.PopupMenu().open()

        BoxLayout:
            orientation: "horizontal"
            Label:
                text: "Name:"
                size_hint: (.3, .3)
            TextInput:
                id: txtName
                multiline: False
                size_hint: (.7, .3)
    
        BoxLayout:
            orientation: "horizontal"

            Label:
                text: "Sex:"
                size_hint: (.3, .3)
    
            Label:
                text: "F"
                halign: "right"
                font_size: 20
            CheckBox:
                group: "sex"
                on_active: root.checkbox_click(self, self.active, "f")

            Label:
                text: "M"
                halign: "right"
                font_size: 20
            CheckBox:
                group: "sex"
                on_active: root.checkbox_click(self, self.active, "m")

        BoxLayout:
            orientation: "vertical"

            Label:
                text: "What is the region of your head that hurts?"
                size_hint: (1, .3)

            GridLayout:
                cols: 2
                size: root.width, root.height
                padding: 10
                spacing: 10

                Label:
                    text: "Front"
                    font_size: 20
                    # canvas.before:
                    #     Rectangle:
                    #         size: self.size
                    #         pos: self.pos
                CheckBox:
                    on_active: root.checkbox_click(self, self.active, "front")

                Label:
                    text: "Back"
                    font_size: 20
                CheckBox:
                    on_active: root.checkbox_click(self, self.active, "back")

                Label:
                    text: "Lateral / Both sides"
                    font_size: 20
                CheckBox:
                    on_active: root.checkbox_click(self, self.active, "lateral")
        
                Label:
                    text: "I don't know"
                    font_size: 20
                CheckBox:
                    on_active: root.checkbox_click(self, self.active, "n/a")

        Label:
            id: lblOutput
            background_color: (0, 0, 1, 1)
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    size: self.size
                    pos: self.pos
            
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: "Submit"
                on_press: root.submit(self)
            Button:
                text: "Clear"
                on_press: root.clear(self)

        
